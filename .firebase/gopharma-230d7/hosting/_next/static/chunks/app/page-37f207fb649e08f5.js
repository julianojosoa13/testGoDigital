(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1661:(e,t,r)=>{Promise.resolve().then(r.bind(r,901))},901:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var a=r(5155),l=r(2115);let o=e=>{let{onClick:t,title:r,type:l}=e;return(0,a.jsx)("button",{onClick:e=>t(e),className:"".concat("px-4 py-2 rounded font-semibold text-sm transition-all"," ").concat("primary"===l?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"," h-11 w-52"),children:r})},s=e=>{let{action:t,product:r,onClose:s,onSave:i}=e,[n,c]=(0,l.useState)("modifier"===t&&(null==r?void 0:r.code)||""),[d,u]=(0,l.useState)("modifier"===t&&(null==r?void 0:r.name)||""),[m,x]=(0,l.useState)("modifier"===t&&(null==r?void 0:r.quantity)||0),b="modifier"===t&&r&&r.code===n&&r.name===d&&r.quantity===m,y=e=>{x(t=>Math.max(0,t+e))},g=e=>{if(e.preventDefault(),"nouveau"===t||"modifier"===t&&!b){let e={code:n,name:d,quantity:m,id:r?r.id:""};console.log("Product Dialog :>> ",e),i(e)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-96 shadow-lg",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"nouveau"===t?"Ajouter un nouveau Medicament":"Modifier un Produit"}),(0,a.jsxs)("form",{children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Code"}),(0,a.jsx)("input",{type:"text",value:n,onChange:e=>c(e.target.value),disabled:"modifier"===t,className:"w-full p-2 border rounded ".concat("modifier"===t?"bg-gray-100 text-gray-500":"")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Libel\xe9 du Produit"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full p-2 border rounded"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Quantit\xe9"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>y(-1),className:"w-8 h-8 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center hover:bg-gray-300",children:"-"}),(0,a.jsx)("input",{type:"number",value:m,onChange:e=>x(Math.max(0,+e.target.value)),className:"w-16 text-center border rounded"}),(0,a.jsx)("button",{type:"button",onClick:()=>y(1),className:"w-8 h-8 rounded-full bg-gray-200 text-gray-700 flex items-center justify-center hover:bg-gray-300",children:"+"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,a.jsx)(o,{title:"Annuler",type:"secondary",onClick:s}),(0,a.jsx)(o,{title:"nouveau"===t?"Ajouter":"Enregistrer",type:"primary",onClick:e=>g(e)})]})]})]})})},i=e=>{let{products:t,onEdit:r,onDelete:l}=e,s=e=>0===e?{label:"STOCK \xc9PUIS\xc9",color:"text-red-500"}:e<5?{label:"STOCK EN BAISSE",color:"text-orange-500"}:{label:"PLUSIEURS STOCK",color:"text-green-500"};return(0,a.jsxs)("table",{className:"table-auto w-full border-collapse border border-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-200",children:[(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Code"}),(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Nom"}),(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Quantit\xe9"}),(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Statut"}),(0,a.jsx)("th",{className:"border border-gray-300 px-4 py-2",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>{let t=s(e.quantity);return(0,a.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.code}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.name}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:e.quantity}),(0,a.jsx)("td",{className:"border border-gray-300 px-4 py-2 ".concat(t.color),children:t.label}),(0,a.jsxs)("td",{className:"border border-gray-300 px-4 py-2 flex gap-2 justify-center items-center",children:[(0,a.jsx)(o,{title:"Modifier ✏️",type:"secondary",onClick:()=>r(e)}),(0,a.jsx)(o,{title:"Supprimer \uD83D\uDDD1️",type:"primary",onClick:()=>l(e.id)})]})]},e.id)})})]})};var n=r(9904),c=r(7058);let d=(0,n.Wp)({apiKey:"AIzaSyAM3FosOdo-yVaRU1jK12RbQQU3iaj4ekY",authDomain:"gopharma-230d7.firebaseapp.com",projectId:"gopharma-230d7",storageBucket:"gopharma-230d7.firebasestorage.app",messagingSenderId:"193172513145",appId:"1:193172513145:web:b26cc76a5f24177b644fa8",measurementId:"G-BLNT9V0BX3"}),u=(0,c.aU)(d),m=async e=>{let t=(0,c.rJ)(u,"Medicament"),r=(0,c.H9)(t);return console.log("enregistrement dans firestore"),console.log("New Doc >> ",r),await (0,c.BN)(r,{...e,id:r.id}),r.id},x=async(e,t)=>{console.log("Modifications :>>> ",t,e);try{let r=(0,c.H9)(u,"Medicament",e);console.log("Product Ref ",r),await (0,c.mZ)(r,t),console.log("Product updated successfully!")}catch(e){console.error("Error updating product:",e)}},b=async e=>{try{let t=(0,c.H9)(u,"Medicament",e);await (0,c.mZ)(t,{isActive:!1}),console.log("Product soft-deleted successfully!")}catch(e){console.error("Error deleting product:",e)}},y=async()=>{let e=[];try{return(await (0,c.GG)((0,c.rJ)(u,"Medicament"))).forEach(t=>{let r=t.data();e.push({...r})}),e}catch(e){return console.error("Error fetching products:",e),[]}};function g(){let[e,t]=(0,l.useState)(!1),[r,n]=(0,l.useState)(null),[c,d]=(0,l.useState)([]),u=async()=>{d((await y()).filter(e=>!1!==e.isActive))};(0,l.useEffect)(()=>{u()},[]);let g=async e=>{if(r)console.log("modif produit",e),await x(e.id,{code:e.code,name:e.name,quantity:e.quantity,isActive:!0});else{console.log("Ajout nouvouea produit",{...e,isActive:!0});let t={...e,isActive:!0};await m(t)}t(!1),n(null),console.log("Fetching products..."),await u()},p=async e=>{await b(e),await u()};return(0,a.jsx)("div",{children:(0,a.jsxs)("main",{className:"flex flex-1 w-screen h-screen flex-col",children:[(0,a.jsx)("h1",{className:"text-center font-bold text-3xl",children:"GoPharma"}),(0,a.jsxs)("div",{className:"p-4 rounded-md border-solid border-1 bg-slate-100 m-4 flex flex-1 flex-col gap-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-yellow-500",children:"Bienvenue"}),(0,a.jsx)(o,{title:"Nouveau ➕",onClick:()=>{n(null),t(!0),console.log("Nouveau produit >> ",r)},type:"primary"}),(0,a.jsx)(i,{products:c,onEdit:e=>{console.log(">> Editing product...",e),n(e),t(!0)},onDelete:p}),e&&(0,a.jsx)(s,{action:r?"modifier":"nouveau",product:r||void 0,onSave:e=>g(e),onClose:()=>t(!1)})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,778,441,517,358],()=>t(1661)),_N_E=e.O()}]);